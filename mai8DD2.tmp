[gd_scene load_steps=25 format=3 uid="uid://cikwk55kiytw7"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1_h13ga"]
[ext_resource type="PackedScene" uid="uid://cu40vh5qhd46n" path="res://scenes/player.tscn" id="2_6ej3r"]
[ext_resource type="PackedScene" uid="uid://dnu30hiwkyirr" path="res://scenes/character_creator.tscn" id="2_dy7iq"]
[ext_resource type="Texture2D" uid="uid://dw50cm210r8lv" path="res://testures/hpbarback.png" id="3_b1ycx"]
[ext_resource type="Texture2D" uid="uid://ble1ccabx0kcw" path="res://testures/hpbarFrontpng.png" id="4_3c5ug"]
[ext_resource type="Script" path="res://scripts/hud.gd" id="4_jqyau"]
[ext_resource type="Texture2D" uid="uid://364iqj8sydml" path="res://testures/crosshair.png" id="4_ubu35"]
[ext_resource type="Script" path="res://scripts/player_spawner.gd" id="6_j3j2i"]
[ext_resource type="Script" path="res://scripts/time_left.gd" id="7_jcgvh"]
[ext_resource type="Script" path="res://scripts/map_spawner.gd" id="8_f035o"]
[ext_resource type="PackedScene" uid="uid://c5aibo2ja4co0" path="res://scenes/GUI/MainMenu.tscn" id="10_dlhfp"]
[ext_resource type="Script" path="res://scripts/items_spawner.gd" id="11_5ajcq"]
[ext_resource type="Resource" uid="uid://d1d3mu0qmjvbt" path="res://resources/map/test_map.tres" id="11_41vgh"]
[ext_resource type="Script" path="res://scripts/server_controller.gd" id="11_k83tb"]
[ext_resource type="Script" path="res://scripts/map_resource.gd" id="11_o108o"]
[ext_resource type="Script" path="res://scripts/client_controller.gd" id="12_aighc"]
[ext_resource type="PackedScene" uid="uid://iyb1keojmn67" path="res://scenes/items/health.tscn" id="12_q3kba"]
[ext_resource type="PackedScene" uid="uid://e4kh3q3xch7k" path="res://scenes/items/magazine.tscn" id="13_frq8b"]
[ext_resource type="Resource" uid="uid://mgbfwxr6fpje" path="res://resources/map/map2.tres" id="13_oqo0n"]
[ext_resource type="Script" path="res://scripts/team_manager.gd" id="14_22j3t"]
[ext_resource type="Script" path="res://map.gd" id="14_a6gyp"]
[ext_resource type="PackedScene" uid="uid://crk1kscse6u4h" path="res://scenes/GUI/vote_ui.tscn" id="16_35qch"]
[ext_resource type="PackedScene" uid="uid://bqxs13fhqnjac" path="res://scenes/GUI/vote_card.tscn" id="17_h84mx"]
[ext_resource type="Script" path="res://scripts/game_manager.gd" id="20_eidb2"]

[node name="Main" type="Node3D"]
script = ExtResource("1_h13ga")
character_creator_scene = ExtResource("2_dy7iq")

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("4_jqyau")

[node name="Crosshair" type="TextureRect" parent="HUD" groups=["crosshair"]]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -576.0
offset_top = -324.0
offset_right = 504.0
offset_bottom = 756.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.04, 0.04)
size_flags_vertical = 4
texture = ExtResource("4_ubu35")

[node name="MarginContainer" type="MarginContainer" parent="HUD"]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -101.0
offset_right = 527.0
offset_bottom = 100.0
grow_vertical = 0
scale = Vector2(0.5, 0.5)
theme_override_constants/margin_left = 15
theme_override_constants/margin_bottom = 15

[node name="HBoxContainer" type="VBoxContainer" parent="HUD/MarginContainer"]
layout_mode = 2

[node name="Ammo" type="Label" parent="HUD/MarginContainer/HBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 80
text = "0/0"

[node name="TextureProgressBar" type="TextureProgressBar" parent="HUD/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
value = 53.0
texture_under = ExtResource("3_b1ycx")
texture_progress = ExtResource("4_3c5ug")

[node name="MarginContainer2" type="MarginContainer" parent="HUD"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.5
offset_right = 20.5
offset_bottom = 40.0
grow_horizontal = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 15

[node name="Panel" type="Panel" parent="HUD/MarginContainer2"]
layout_mode = 2

[node name="TimeLeft" type="Label" parent="HUD/MarginContainer2"]
layout_mode = 2
theme_override_font_sizes/font_size = 32
text = "00:00"
script = ExtResource("7_jcgvh")

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="."]
unique_name_in_owner = true
spawn_path = NodePath("../Players")
script = ExtResource("6_j3j2i")
player_scene = ExtResource("2_6ej3r")

[node name="MapSpawner" type="MultiplayerSpawner" parent="."]
unique_name_in_owner = true
spawn_path = NodePath("../Map")
script = ExtResource("8_f035o")
maps = Array[ExtResource("11_o108o")]([ExtResource("11_41vgh"), ExtResource("13_oqo0n")])

[node name="ItemsSpawner" type="MultiplayerSpawner" parent="."]
unique_name_in_owner = true
spawn_path = NodePath("../Items")
script = ExtResource("11_5ajcq")
item_scenes = Array[PackedScene]([ExtResource("12_q3kba"), ExtResource("13_frq8b")])

[node name="SpawnInterval" type="Timer" parent="ItemsSpawner"]
wait_time = 12.0

[node name="Players" type="Node3D" parent="."]

[node name="Map" type="Node3D" parent="."]
script = ExtResource("14_a6gyp")

[node name="Items" type="Node3D" parent="."]

[node name="GUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="MainMenu" parent="GUI" instance=ExtResource("10_dlhfp")]
layout_mode = 1

[node name="TeamDisplay" type="Control" parent="GUI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="VoteUI" parent="GUI" instance=ExtResource("16_35qch")]
visible = false
layout_mode = 1
map_vote_card = ExtResource("17_h84mx")

[node name="ServerController" type="Node" parent="."]
script = ExtResource("11_k83tb")

[node name="ClientController" type="Node" parent="."]
script = ExtResource("12_aighc")

[node name="CharacterCreator" type="Node3D" parent="."]

[node name="TeamManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("14_22j3t")

[node name="GameManager" type="Node" parent="."]
script = ExtResource("20_eidb2")

[node name="RoundTimer" type="Timer" parent="GameManager"]
unique_name_in_owner = true
wait_time = 30.0
one_shot = true

[connection signal="timeout" from="ItemsSpawner/SpawnInterval" to="ItemsSpawner" method="_on_spawn_interval_timeout"]
[connection signal="pressed" from="GUI/MainMenu/VBoxContainer/Join" to="." method="_on_join_pressed"]
[connection signal="pressed" from="GUI/MainMenu/VBoxContainer/Host" to="." method="_on_host_pressed"]
[connection signal="timeout" from="GameManager/RoundTimer" to="GameManager" method="_on_round_timer_timeout"]

[editable path="GUI/MainMenu"]
